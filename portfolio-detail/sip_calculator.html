<!DOCTYPE html>
<html lang="en">
  <body>
    <div class="col-md-12 portfolio-content">
      <div class="col-md-12 features">
        <div class="namenprice">
          <h1 class="blog-title pull-left" id="heading">SIP Calculator</h1>
          <h2 class="price pull-right" id="r4"></h2>
        </div>
        <div class="col-md-12 top_20"></div>
        <!-- Details -->

        <div class="row">
          <div class="col-md-8 top_10">
            <div class="row">
              <div class="col-md-4">
                <input onclick="changeMode('sip')" id="radio-1" name="radio" type="radio" checked />
                <label for="radio-1" class="radio-label">SIP</label>
              </div>
              <div class="col-md-4">
                <input onclick="changeMode('lumpsum')" id="radio-2" name="radio" type="radio" />
                <label for="radio-2" class="radio-label">Lumpsum</label>
              </div>
            </div>
          </div>
          <div class="col-md-12 details top_30 bottom_10">
            <ul class="row">
              <li class="col-md-4" style="font-size: 1rem"><span>Invested Amount:</span> <span id="r1"></span></li>
              <li class="col-md-4" style="font-size: 1rem"><span>Est. Returns:</span> <span id="r2"></span></li>
              <li class="col-md-4" style="font-size: 1rem"><span>Total Value:</span> <span id="r3"></span></li>
            </ul>
          </div>
          <div class="col-md-8 top_30 bottom_30">
            <form class="site-form" method="post" autocomplete="off" name="google-sheet">
              <div class="row">
                <div class="col-md-6">
                  <label id="amount" for="inputAmount">Monthly Investment</label>
                  <span>₹<input class="site-input" name="Amount" id="inputAmount" type="number" step="500" value="25000" min="500" max="200000" oninput="showValAmount(this.value)" /></span>
                  <input class="slider" name="realAmount" id="myAmount" type="range" step="500" value="25000" min="500" max="200000" />
                </div>
                <div class="col-md-6">
                  <label for="inputRoi">Expected Return Rate %</label>
                  <span><input class="site-input" name="Retunrs" id="inputRoi" type="number" value="12" min="1" max="30" step="0.5" oninput="showValRoi(this.value)" /></span>
                  <input class="slider" name="realRoi" id="myRoi" type="range" value="12" min="1" max="30" step="0.5" />
                </div>
                <div class="col-md-6">
                  <label for="inputRoi">Time Period Year</label>
                  <span><input class="site-input" name="Years" id="inputYears" type="number" value="10" min="1" max="30" step="1" oninput="showValYears(this.value)" /></span>
                  <input class="slider" name="realYears" id="myYears" type="range" value="10" min="1" max="30" step="1" />
                </div>
              </div>
            </form>
          </div>
          <div class="col-md-4 top_45 bottom_30">
            <div class="chart">
              <canvas id="myChart" width="300" height="300"></canvas>
              <div class="cta" id="cta"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Description -->
      <div class="col-md-12 description">
        <div class="section-title bottom_30">
          <span></span>
          <h2>What is a SIP Calculator?</h2>
        </div>
        <p>A SIP calculator is a simple tool that allows individuals to get an idea of the returns on their mutual fund investments made through SIP. SIP investments in mutual funds have become one of the most popular investment options for millennials lately.</p>
        <p>These mutual fund sip calculators are designed to give potential investors an estimate on their mutual fund investments. However, the actual returns offered by a mutual fund scheme varies depending on various factors. The SIP calculator does not provide clarification for the exit load and expense ratio (if any).</p>
        <p>This calculator will calculate the wealth gain and expected returns for your monthly SIP investment. Indeed, you get a rough estimate on the maturity amount for any of your monthly SIP, based on a projected annual return rate.</p>
      </div>

      <!-- Social -->
      <div class="social-share col-md-12 bottom_60 top_45 text-center">
        <ul>
          <li>
            <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
          </li>
          <li>
            <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
          </li>
          <li>
            <a href="#"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
          </li>
          <li>
            <a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a>
          </li>
        </ul>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" integrity="sha512-s+xg36jbIujB2S2VKfpGmlC3T5V2TF3lY48DX7u2r9XzGzgPsa6wTpOQA7J9iffvdeBN0q9tKzRxVxw1JviZPg==" crossorigin="anonymous"></script>

    <script>
      "use strict";

      var amountSlider = document.getElementById("myAmount");
      var amountOutput = document.getElementById("inputAmount");
      var roiSlider = document.getElementById("myRoi");
      var roiOutput = document.getElementById("inputRoi");
      var yearSlider = document.getElementById("myYears");
      var yearOutput = document.getElementById("inputYears");

      amountOutput.innerHTML = amountSlider.value;
      roiOutput.innerHTML = roiSlider.value;
      yearOutput.innerHTML = yearSlider.value;

      var heading = document.getElementById("heading");
      var amountLabel = document.getElementById("amount");

      amountSlider.oninput = function () {
        amountOutput.innerHTML = this.value;
      };
      roiSlider.oninput = function () {
        roiOutput.innerHTML = this.value;
      };
      yearSlider.oninput = function () {
        yearOutput.innerHTML = this.value;
      };

      function showValAmount(newVal) {
        amountSlider.value = newVal;
        calculateIt();
      }
      function showValRoi(newVal) {
        roiSlider.value = newVal;
        calculateIt();
      }
      function showValYears(newVal) {
        yearSlider.value = newVal;
        calculateIt();
      }

      amountSlider.addEventListener("input", updateValueAmount);
      roiSlider.addEventListener("input", updateValueRoi);
      yearSlider.addEventListener("input", updateValueYears);

      function updateValueAmount(e) {
        amountOutput.value = e.srcElement.value;
        calculateIt();
      }
      function updateValueRoi(e) {
        roiOutput.value = e.srcElement.value;
        calculateIt();
      }
      function updateValueYears(e) {
        yearOutput.value = e.srcElement.value;
        calculateIt();
      }

      AttachInputListeners();
      var initialLoad = true;
      var chart;
      var calculatorMode;
      getParams(); //get cal mode
      changeMode(calculatorMode); //set cal mode
      // calculateIt();

      function changeMode(mode) {
        calculatorMode = mode;
        heading.innerHTML = mode === "sip" ? "SIP Calculator" : "Lumpsum Calculator";
        amountLabel.innerHTML = mode === "sip" ? "Monthly Investment" : "Total Investment";
        if (calculatorMode === "lumpsum") {
          document.getElementById("radio-2").checked = true;
        }
        calculateIt();
      }

      function calculateIt() {
        var investedAmount = document.getElementById("r1");
        var wealthGained = document.getElementById("r2");
        var totalValue = document.getElementById("r3");
        var totalValuea = document.getElementById("r4");

        var A, R, N;

        A = Number(amountOutput.value);
        R = Number(roiOutput.value);
        N = Number(yearOutput.value);

        if (A >= 500 && R >= 1) {
          var MonthlyROI = R / (100 * 12);
          var months = N * 12;
          var sip = Math.round(A * ((Math.pow(1 + MonthlyROI, months) - 1) / MonthlyROI) * (1 + MonthlyROI));
          var lumpsum = Math.round(Math.pow(1 + R / 100, N) * A);

          let investedAmountVal;
          let wealthGainedVal;
          let totalValueVal;

          if (calculatorMode === "sip") {
            investedAmountVal = A * N * 12;
            wealthGainedVal = sip - investedAmountVal;
            totalValueVal = sip;
          } else {
            investedAmountVal = A;
            wealthGainedVal = lumpsum - investedAmountVal;
            totalValueVal = lumpsum;
          }
          investedAmount.innerHTML = "₹ " + investedAmountVal.toLocaleString();
          wealthGained.innerHTML = "₹ " + wealthGainedVal.toLocaleString();
          totalValue.innerHTML = "₹ " + totalValueVal.toLocaleString();
          totalValuea.innerHTML = "₹ " + totalValueVal.toLocaleString();

          if (!initialLoad) {
            chart.destroy();
          }
          DrawChart(investedAmountVal, wealthGainedVal);
          initialLoad = false;
        }
      }

      function DrawChart(investedAmountVal, wealthGainedVal) {
        var ctx = document.getElementById("myChart").getContext("2d");

        chart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: ["Invested Amount", "Est. Returns"],
            datasets: [
              {
                backgroundColor: ["Orange", "#63bf20"],
                data: [investedAmountVal, wealthGainedVal],
              },
            ],
          },
          options: {
            segmentShowStroke: false,
            responsive: true,
          },
        });
      }

      function getParams() {
        let urlVal = window.location.href;
        let url = new URL(urlVal);
        let cta = url.searchParams.get("cta");
        let mode = url.searchParams.get("mode");
        let logo = url.searchParams.get("logo");
        if (mode === "lumpsum") {
          calculatorMode = "lumpsum";
        } else if (mode === "sip") {
          calculatorMode = "sip";
        } else {
          calculatorMode = "sip"; //without param
        }
        if (cta === "hide") {
          let ctaDiv = document.getElementById("cta");
          ctaDiv.style.display = "none";
        }
        if (logo === "true") {
          document.getElementById("logo").style.display = "block";
        }
      }

      function AttachInputListeners() {
        amountOutput.addEventListener("input", (e) => {
          let val = Number(e.target.value);
          if (val < 0) {
            amountOutput.value = 500;
            calculateIt();
          }
          if (val > 200000) {
            amountOutput.value = 200000;
            calculateIt();
          }
        });

        roiOutput.addEventListener("input", (e) => {
          let val = Number(e.target.value);
          if (val < 0) {
            roiOutput.value = 1;
            calculateIt();
          }
          if (val > 30) {
            roiOutput.value = 30;
            calculateIt();
          }
        });

        yearOutput.addEventListener("input", (e) => {
          let val = Number(e.target.value);
          if (!Number.isInteger(val)) {
            val = Math.ceil(val);
            yearOutput.value = val;
            calculateIt();
          }
          if (val < 1) {
            yearOutput.value = 1;
            calculateIt();
          }
          if (val > 30) {
            yearOutput.value = 30;
            calculateIt();
          }
        });
      }
    </script>
  </body>
</html>
