<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="contanier">
      <div class="nav_bar">
        <h1>Logo</h1>
      </div>

      <form>
        <label for="id">User Id</label>
        <input type="text" name="" id="id" />
        <input type="text" id="txtId" />
        <br />
        <label for="username">User Name</label>
        <input type="text" name="" id="username" />
        <br />
        <label for="ordertype">Order Type</label>
        <input type="text" name="" id="ordertype" />
        <br />

        <label for="shift">Shft</label>
        <input type="text" name="" id="shift" />
        <br />
        <label for="ordercount">order Count</label>
        <input type="text" id="ordercount" />
      </form>
      <button onclick="adduser()">Add</button>

      <button onclick="SaveUpdateUser()">Update</button>
      <section>
        <table border="1">
          <tr>
            <th>id</th>
            <th>Name</th>
            <th>Order type</th>
            <th>Shift</th>
            <th>Order Count</th>
            <th>action</th>
          </tr>
          <tbody id="print_user"></tbody>
        </table>
      </section>
    </div>

    <script>
      function $(id) {
        return document.getElementById(id);
      }

      //   Database id
      var idupDatabase = JSON.parse(localStorage.getItem("idupDatabase"));
      if (idupDatabase === null) {
        idupDatabase = [];
        var idupDatabase = 1;
        localStorage.setItem("idupDatabase", JSON.stringify(idupDatabase));
      }
      // Database
      var Database = JSON.parse(localStorage.getItem("Database"));
      if (Database === null) {
        Database = [];
        localStorage.setItem("Database", JSON.stringify(Database));
      }

      //   Add User
      function adduser() {
        var id = idupDatabase;
        var user_id = $("id").value;
        var user_name = $("username").value;
        var order_type = $("ordertype").value;
        var user_shift = $("shift").value;
        var order_count = $("ordercount").value;

        if (user_id != "" && user_name != "") {
          var pushuser = { id, user_id, user_name, order_type, user_shift, order_count };
          Database.push(pushuser);
          localStorage.setItem("Database", JSON.stringify(Database));
          idupDatabase++;
          localStorage.setItem("idupDatabase", JSON.stringify(idupDatabase));
        } else {
          alert("Enter Plasea");
        }
        var id = idupDatabase;
        $("id").value = "";
        $("username").value = "";
        $("ordertype").value = "";
        $("shift").value = "";
        $("ordercount").value = "";
        refresh();
      }

      //   Print User
      function printuser() {
        document.getElementById("print_user").innerHTML = "";
        var Database = JSON.parse(localStorage.getItem("Database"));
        for (let i = 0; i < Database.length; i++) {
          var Note_list =
            `
            <tr>
              <td>` +
            Database[i].user_id +
            `</td>
              <td>` +
            Database[i].user_name +
            `</td>
              <td>f1</td>
              <td>Shift 1</td>
              <td>10</td>
              <td><a href="#" onclick="edituser(` +
            Database[i].id +
            `)">Edit</a><br /><a href="#" onclick="DeleteUser(` +
            Database[i].id +
            `)">Delete</a></td>
            </tr>`;
          document.getElementById("print_user").innerHTML += Note_list;
        }
      }

      //   Delete User
      function DeleteUser(id) {
        for (var i = 0; i < Database.length; i++) {
          if (id == Database[i].id) {
            Database.splice(i, 1);

            localStorage.setItem("Database", JSON.stringify(Database));
            refresh();
          }
        }
      }
      //   Edit User
      function edituser(id) {
        for (var i = 0; i < Database.length; i++) {
          if (id == Database[i].id) {
            document.getElementById("txtId").value = Database[i].id;
            document.getElementById("username").value = Database[i].user_name;
          }
        }
      }
      //   Save Update User
      function SaveUpdateUser() {
        var idchange = document.getElementById("txtId").value;

        for (var i = 0; i < Database.length; i++) {
          if (idchange == Database[i].id) {
            Database[i].user_name = document.getElementById("username").value;

            localStorage.setItem("Database", JSON.stringify(Database));
          }
        }
        refresh();
      }
      function refresh() {
        printuser();
      }
      refresh();
    </script>
  </body>
</html>
