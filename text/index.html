<!DOCTYPE html>
<!-- The DOCTYPE declaration above will set the     -->
<!-- browser's rendering engine into                -->
<!-- "Standards Mode". Replacing this declaration   -->
<!-- with a "Quirks Mode" doctype is not supported. -->

<html>
  <head>
    <script type="text/javascript" src="https://jbialobr.github.io/JsQRScanner/jsPretty/jsqrscanner.nocache.js"></script>
  </head>
  <body>
    <div class="qrscanner" id="scanner"></div>
    <textarea id="scannedTextMemo" class="textInput form-memo form-field-input textInput-readonly" rows="3" readonly> </textarea>
    <textarea id="scannedTextMemoHist" class="textInput form-memo form-field-input textInput-readonly" value="" rows="6" readonly> </textarea>

    <script type="text/javascript">
      function onQRCodeScanned(scannedText) {
        var scannedTextMemo = document.getElementById("scannedTextMemo");
        if (scannedTextMemo) {
          scannedTextMemo.value = scannedText;
        }
        var scannedTextMemoHist = document.getElementById("scannedTextMemoHist");
        if (scannedTextMemoHist) {
          scannedTextMemoHist.value = scannedTextMemoHist.value + "\n" + scannedText;
        }
      }

      //this function will be called when JsQRScanner is ready to use
      function JsQRScannerReady() {
        //create a new scanner passing to it a callback function that will be invoked when
        //the scanner succesfully scan a QR code
        var jbScanner = new JsQRScanner(onQRCodeScanned);
        //var jbScanner = new JsQRScanner(onQRCodeScanned, provideVideo);
        //reduce the size of analyzed image to increase performance on mobile devices
        jbScanner.setSnapImageMaxSize(300);
        var scannerParentElement = document.getElementById("scanner");
        if (scannerParentElement) {
          //append the jbScanner to an existing DOM element
          jbScanner.appendTo(scannerParentElement);
        }
      }
    </script>
  </body>
</html>
